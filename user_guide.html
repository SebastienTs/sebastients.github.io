<!DOCTYPE html>
<html lang="en">
<head>
    <title>Getting started with LOBSTER</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">    
    <link rel="shortcut icon" href="favicon.ico">  
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- FontAwesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">   
    <!-- Plugins CSS -->    
    <link rel="stylesheet" href="assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="assets/plugins/elegant_font/css/style.css">  
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css"> 
</head> 

<body class="body-pink">
    <div class="page-wrapper">
        <!-- ******Header****** -->
        <header id="header" class="header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="index.html">
                            <span aria-hidden="true" class="icon_documents_alt icon"></span>
                            <span class="text-highlight">LOB</span><span class="text-bold">STER</span>
                        </a>
                    </h1>    
                </div>
            </div>
        </header>
		
        <div class="doc-wrapper">
            <div class="container">
                <div id="doc-header" class="doc-header text-center">
                    <h1 class="doc-title"><i class="icon fa fa-book"></i> Getting Started</h1>
                    <div class="meta"><i class="far fa-clock"></i> Last updated: November 13th, 2019</div>
                </div>
				
				<!--//doc-header-->
                <div class="doc-body row">
                    
                    <div class="doc-content col-md-9 col-12 order-1">

                    	<p><b>LOBSTER</b> is an image analysis environment designed to identify biological objects in multidimensional microscopy images, and measure their location, co-location, geometry, dynamics and intensity distribution. The images are processed by automatic workflows (no user interaction) and any number of images can be batch processed in a single go. Importantly, the software does not set any limit on image size.</p>

                        <div class="content-inner">
                            <section id="setup-section" class="doc-section">
                                <h2 class="section-title">Setting Up</h2>
                                <div class="section-block">
                                  <p>Assuming that MATLAB (version >=2015a) and both Image processing and Statistics & Machine Learning toolboxes are installed, setting up the software is extremely simple and summarized below:</p>
								  <ul>
                                   <li>Download the software from its <a href="https://github.com/SebastienTs/LOBSTER" target="_blank"> GitHub repository</a> (green button)</li>
                                   <li>Unzip the content to an empty folder where MATLAB has read/write access</li> 
                                   <li>Create an empty folder <b>/Images</b> inside installation folder and unzip the content of <a href="https://drive.google.com/file/d/18A0sm-69TTEl-19DAprqiLHmO-0nBkg4/view?usp=sharing" target="_blank">this archive</a> inside</li>
                                   <li>Create an empty folder <b>/Results</b> inside installation folder, and unzip the content of <a href="https://drive.google.com/file/d/1GiJd-JfBvOHJcm_WOB1_gAvMuRAZzOy3/view?usp=sharing" target="_blank">this archive</a> inside</li>
                                   </ul>
                                   Windows is highly recommended but the software should be compatible with all major operating systems. Refer to <a href="https://drive.google.com/file/d/1hn9RIoW2sG8nhYN_fLvrPlskLbM0sao7/view?usp=sharing" target="_blank"><b>LOBSTER</b> documentation</a> (sections <b>Requirements, Installation and Startup</b>) for details.
                                  </div>
                            </section><!--//doc-section-->
                        </div><!--//content-inner-->

                        <div class="content-inner">
                            <section id="init-section" class="doc-section">
                                <h2 class="section-title">Initializing</h2>
                                <div class="section-block">
                                   <p>To initialize <b>LOBSTER</b>: 
                                   <ul>	
                                   <li>Launch MATLAB</li>
                                   <li>>> <b>cd</b> PathToInstallationFolder</li>
                                   <li>>> <b>init</b></li>
                                   </ul>
                                   This is illustrated at the beginning of <a href="https://drive.google.com/file/d/1N9KWKvS52NMGZH0WiYF8bwJLZsvLFx6J/view?usp=sharing" target="_blank">this video</a>.  
                                  </div>
                            </section><!--//doc-section-->
                        </div><!--//content-inner-->

                        <div class="content-inner">
                            <section id="architecture-section" class="doc-section">
	                              <h2 class="section-title">Architecture</h2>
	                              <div class="section-block">
	                              <p>
	                              <b>LOBSTER</b> relies on simple objects masks as basic building blocks and it decouples objects identification, measurements and visualization. These operations are respectively performed by three computational modules called either interactively from MATLAB console or triggered from <b>LOBSTER</b> Panel (User Interface). In this tutorial we will use the last option; the other option enables building more complex applications, refer to <a href="scripting.html" target="_blank">this page</a> for details.
				    			  </p>
                                  <div class="screenshot-holder">
								    <img class="img-architecture" src="assets/images/architecture.png" alt="screenshot" width="400">
				    			  </div>
                                  <p>
                                  <b>JENI: Identifying objects</b></p>
                                  <p>TIFF images from an input folder are typically processed into object masks by applying a sequence of image analysis functions (workflow) stored in a <a href="journals.html" target="_blank"> journal </a> and processed by <b>JENI</b>. The object masks can be of four kinds (see illustration above):</p>
                                  <ul>
                                  	<li>Binary object masks ('<b>Objs</b>'): plain objects encoded as connected groups of foreground pixels</li>
									<li>Skeleton masks ('<b>Skls</b>'): 1-pixel curves marking filament centrelines, possibly surrounded by segmented objects</li>
									<li>Seed masks ('<b>Spts</b>'): foreground object pixels marking objects, possibly surrounded by segmented objects</li>
									<li>Label masks ('<b>Trks</b>'): plain objects encoded as connected groups of pixels with unique nonzero <b>IDs.</b></li>
								  </ul>
                                  </p>
                                  <p><b>IRMA: Measuring object masks</b></p>
                                  <p>
                                  Object measurements are performed by <b>IRMA</b> from the object masks returned by <b>JENI</b>, and they are exported to <b>.csv</b> reports. Several channels can be processed at once; they can either be used to perform intensity measurements inside the object mask, or more advanced operations such as object sub-counting (count markers from a seed mask inside objects) or object co-localization (count number of non-null pixels from another object mask inside objects).
								  </p>
								  <p><b>JOSE/IRMA: Exporting object models</b></p>
								  <p>
                                  Identified objects can be exported as 2D/3D models so as to be edited/explored externally. 
                                </div>
                            </section><!--//doc-section-->
                        </div><!--//content-inner-->

                        <div class="content-inner">
                            <section id="identify-section" class="doc-section">
                                <h2 class="section-title">Identifying Objects</h2>
                                <div class="section-block">
                                	<p>
                                	Workflows are configured inside <a href="#journals-section">journals</a>, human readable text files configuring input/output folders, the sequence of <b>LOBSTER</b> functions to apply to each input image and their associated parameters. Journals are processed by <b>JENI</b>.
                                	<p>
                                	To get acquainted with journals, you can launch one of them by typing <b>JENI</b> in the console and browsing to its file:
                                	</p>
                                  	<ul style="list-style: none;">
                                  	<li>>> <b>JENI</b>;</li>
									</ul>
									</p>
									<p>
									For instance, to get started, select the journal <font color="magenta">'Tissue_SegWaterTiles.jl'</font> stored in <b>LOBSTER</b> <b>/Journals/jl</b> folder (2D Journals). Every input image is displayed together with the results. Simply press <b>'X'</b> to proceed to the next image. You can also tweak the parameters of a journal and relaunch it from MATLAB console: this is illustrated in <a href="https://drive.google.com/file/d/1N9KWKvS52NMGZH0WiYF8bwJLZsvLFx6J/view?usp=sharing" target="_blank">this video</a>. 
									</p>
                            </div>
                            </section><!--//doc-section-->
                        </div><!--//content-inner-->

                        <div class="content-inner">
                            <section id="gui-section" class="doc-section">
                                <h2 class="section-title">LOBSTER Panel</h2>
                                <div class="section-block">
                                	<p>To start LOBSTER Panel, type >> <b>LOBSTER</b> in the console. The panel enables to load up to 2 journals, trigger any kind of object measurements and export 3D object models. A context help is provided when moving on an item from the panel. The important parameters from the upper section (from left to right) are:</p>
                                  <ul>
                                  <li>Input images dimensionality (2D/3D)</li>
                                  <li>Whether object models should be exported or not (3D images only)</li>
                                  <li>Input images <b>ZRatio</b> (ratio between slice spacing and pixel size, default to 1)</li>
                                  <li>If Journal 2 is a time-lapse journal or not (default to '<b>-</b>', no time-lapse)</li>
                                  </ul>
                                  
								  <p>The buttons on the right side are used to save/load a project and to exit the panel. To load a journal, press the button <b>Journal1</b> and browse to its name. For instance, let's open the 2D journal <font color="magenta">'Tissue_SegWaterTiles.jl'</font>. Loading a journal reads its input and output folders from the file, but these fields can be edited if required.</p>

								  <div class="screenshot-holder">
								    	<img class="img-gui" src="assets/images/GUI.png" alt="screenshot" width="400">
				    			  </div>

                                  <p>To launch a journal press on the associated <b>Run</b> button. To  visually check the output of the journal, toggle the button <b>Batch</b> on the lower part to <b>Adjust</b>. If the parameters are not well adjusted, you can interrupt the journal by presing <b>'Q'</b>, edit the journal by clicking the associated <b>Edit</b> button, saving it (floppy disk or <b>Ctrl+S</b>) and launching it again. Once the parameters are well adjusted, toggle back to batch mode and launch the journal to process all images from the input folder. It is possible to open a journal input and output folders by pressing <b>Show In</b> and <b>Show Out</b>.

                                  <p>Next, to perform measurements on the identified objects, set mask folder to <b>O1</b>, that is journal 1 output (default), and set the measurement to '<b>Objs</b>' (lower drop down menu) since we are here aiming to measure plain objects (cells). Now <b>Run Measure 1</b>, a folder with two <b>.csv</b> files (two input images) should pop up. You can browse the first reports by clicking <b>Show some Reports</b> and also inspect measurements summary from MATLAB console.</p>

                                  <div class="screenshot-holder">
								    	<img class="img-gui2" src="assets/images/GUI2.png" alt="screenshot" width="400">
				    			  </div>

				    			  <p>Now load the project <font color="magenta">'FISH.mat'</font>. In this project, two journals are loaded: one identifies nuclei and another one identifies FISH markers in another channel. <b>Measure 1</b> is linked to <b>O1</b> to measure nuclei and <b>O2</b> is measured as intensity channel. <b>O2</b> is the output of <b>Journal 2</b>, that is the seed mask localizing the FISH markers. Since object intensity measurements also report the number of non null pixel per object, the number of FISH marker per nucleus can be obtained! Importantly, all the journals and measurements can be triggered automatically by pressing <b>Run All</b>.</p>

				    			  <p>Regular intensity measurements (from <b>I1</b>) can also be performed. If the images from the channel to measure hold for instance the string <font color="magenta">'_C01'</font>, the channel filter should be set to <font color="magenta">'*_C01*.tif'</font> instead of the default <font color="magenta">'*.tif'</font>. This is illustrated in the project <font color="magenta">'NucleiIntensityMeas.mat'</font>.</p>

				    			  <p>Several examples of how to export 3D models and combine two journals to achieve advanced measurements are provided in the <b>/Projects</b> folder. Here is a list of tasks you can perform to get familiar with LOBSTER:
				    			  <ul>
                                  <li>Open project <font color="magenta">'BloodVesselsTracing.mat'</font>, click <b>Run All</b> and visualize the output models (SWC filament networks) by loading them from <a href="https://janeliascicomp.github.io/SharkViewer/" target="_blank">this webpage</a>.</li>
                                  <li>Open project <font color="magenta">'CellPilar3DMesh.mat'</font>, click <b>Run All</b> and visualize the output models (STL mesh) by drag and droping them on <a href="https://www.viewstl.com/" target="_blank">this webpage</a>.</li>
								  <li>Open project <font color="magenta">'LymphGlandCellInsight.mat'</font>, click <b>Run All</b>. Open ImageJ and drag and drop the macro CellInsight (from <b>Tools/CellInsight/CellInsight.ijm</b>). You also need to copy the file <b>GetString.ijm</b> from the same folder to ImageJ <b>macros</b> folder on first usage). Drag and drop the input image (the journal input folder is opened since the <b>.xls</b> CellInsight file is exported inside. Launch the macro and press <b>Import</b>. The object markers can be explored and edited (CellInsight). The input image can be opened in virtual stack mode to handle images of unlimited size.</li>
								  <li>From the results of the previous project: open the input image in ImageJ, drag and drop the report file (<b>.csv</b>) to ImageJ and drag and drop + run the macro <b>Montager.ijm</b> from <b>Tools/</b>. You will see an interactive montage of all detected objects, clicking an object jump to its position in the original image. The input image can be opened in virtual stack mode to handle images of unlimited size.</li>
								  <li>Open project <font color="magenta">'HeLaTracking.mat'</font>. This project performs tracking of dividing cells from a sequence of 2D images (<b>TL</b> is enabled). As can be noticed, <b>I2</b> points to <b>O1</b> since the 2D are first segmented into object masks by the first journal before being tracked by the second journal. Measuring the output of the second journal brings three report files: area, XPosition and YPosition (centroid) of the objects. The results can be visualized by running the ImageJ macro <b>Tools/OverlayTrackedObjects.ijm</b> and selecting the input from the first journal as input folder and the output of the second journal as output folder.</li>
                                  </ul>
				    			  </p>

                            </div>
                            </section><!--//doc-section-->
                        </div><!--//content-inner-->

                        <div class="content-inner">
                            <section id="guide-section" class="doc-section">
                                <h2 class="section-title">Using LOBSTER for your own Application</h2>
                                <div class="section-block">
                                  <p>
                                  	Designing practical <a href="journals.html" target="_blank">journals</a> and becoming familiar with <a href="#2djournalsfunctions"><b>LOBSTER</b> functions</a> can take some practice. To get started, the best approach is probably to test and adapt existing journals since many sample journals and companion images are provided (see <a href="https://drive.google.com/file/d/1hn9RIoW2sG8nhYN_fLvrPlskLbM0sao7/view?usp=sharing" target="_blank"><b>LOBSTER</b> documentation</a> <b>Appendix - Applications</b>). 
                                  	<p>To process your own images, you can follow this procedure:</p>
                                  	<ul>
									<li>Look for a journal performing at least part of the analysis you plan.</li>
									<li>Run the journal to see the input images and get a feeling about the results.</li>
									<li>Make a copy of the journal and modify it to point to your input image folder (for large images, you probably first want to crop out some illustrative regions).</li>
									<li>Make sure that your images have the same bit depth than the images of the journal, if not optionally convert them.</li>
									<li>Run the journal.</li>
									<li>You will probably need to tweak function parameters to obtain satisfying results: open the journal from the console hyperlink and edit function parameters. Save the journal and run it again (from console hyperlink). To get help on a function, right click on its name from MATLAB script editor and select <b>Help on Selection</b>.</li>
									<li>Completing the project might finally require some customization, such as combining multiple journals and performing cross-measurements or exporting object models, such as ilustrated in the previous section.</li>
									<li>If necessary, to customize or write a journal from scratch refer to the <a href="journals.html" target="_blank">journals</a> section and to the section <a href="journals.html" target="_blank">scripting to build scripts with more than 2 journals</a>.
									</ul>
                                  </p> 
                            </div>
                            </section><!--//doc-section-->
                        </div><!--//content-inner-->
						
                   	</div><!--//doc-content-->

                    <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                        <div id="doc-nav" class="doc-nav">
	                            <nav id="doc-menu" class="nav doc-menu flex-column sticky">
	                            	<a class="nav-link scrollto" href="#setup-section">Setting Up</a>
	                            	<a class="nav-link scrollto" href="#init-section">Initialiazing</a>
	                            	<a class="nav-link scrollto" href="#architecture-section">Architecture</a>
	                            	<a class="nav-link scrollto" href="#identify-section">Identifying Objects</a>
	                            	<a class="nav-link scrollto" href="#gui-section">LOBSTER Panel</a>
	                            	<a class="nav-link scrollto" href="#guide-section">Customizing</a>
									</nav>
	                            </nav><!--//doc-menu-->
                        </div>

                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->              
            </div><!--//container-->
        </div><!--//doc-wrapper-->
    </div><!--//page-wrapper-->
    
    <footer id="footer" class="footer text-center">
        <div class="container">
            <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can buy the commercial license via our website: themes.3rdwavemedia.com */-->
            <small class="copyright">Designed with <i class="fas fa-heart"></i> by <a href="https://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a> for developers</small>  
        </div><!--//container-->
    </footer><!--//footer-->
    
    <!-- Main Javascript -->          
    <script type="text/javascript" src="assets/plugins/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/plugins/prism/prism.js"></script>    
    <script type="text/javascript" src="assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>      
    <script type="text/javascript" src="assets/plugins/stickyfill/dist/stickyfill.min.js"></script>                                                         
    <script type="text/javascript" src="assets/js/main.js"></script>
    
</body>
</html>